<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!--Description-->
  
  <meta name="description" content="‘SecRing | 关注网络安全,记录在IT圈子成长的故事.主要包括前端、java开发,信息安全,数据分析等,当然也有一些生活的乐趣...">
  

  <!--Author-->
  
  <meta name="author" content="Evros">
  

  <!--Open Graph Title-->
  
      <meta property="og:title" content="关于勒索软件的了解与防御"/>
  
  <!--Open Graph Description-->
  
      <meta property="og:description" content="‘SecRing | 关注网络安全,记录在IT圈子成长的故事.主要包括前端、java开发,信息安全,数据分析等,当然也有一些生活的乐趣..." />
  
  <!--Open Graph Site Name-->
  <meta property="og:site_name" content="‘SecRing | 关注网络安全·信仰极简风"/>
  <!--Type page-->
  
      <meta property="og:type" content="article" />
  
  <!--Page Cover-->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- Title -->
  
  <title>关于勒索软件的了解与防御 - ‘SecRing | 关注网络安全·信仰极简风</title>


  <link rel="shortcut icon" href="/favicon.png">

  <!-- Custom CSS/Sass -->
  <link rel="stylesheet" href="/css/style.css">

  <!----------------------------
  https://github.com/GallenHu/hexo-theme-Daily

 _____            _   _
|  __ \          (_) | |
| |  | |   __ _   _  | |  _   _
| |  | |  / _` | | | | | | | | |
| |__| | | (_| | | | | | | |_| |
|_____/   \__,_| |_| |_|  \__, |
                          __/ |
                         |___/

    --------------------------->

</head>


<body>

  <!-- Nav -->
  <header class="site-header">
  <div class="header-inside">
    <div class="logo">
      <a href="/" rel="home">
        
        <img src="/favicon.png" alt="‘SecRing | 关注网络安全·信仰极简风" height="60">
        
      </a>
    </div>
    <!-- Navigation -->
    <nav class="navbar">
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse">
        <ul class="navbar-nav">
          
          
            <li>
              <a href="/archives">
                
                  Archive
                
              </a>
            </li>
          
            <li>
              <a href="/life">
                
                  Life
                
              </a>
            </li>
          
            <li>
              <a href="/graphy">
                
                  Graphy
                
              </a>
            </li>
          
            <li>
              <a href="/about">
                
                  About
                
              </a>
            </li>
          
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </nav>
    <div class="button-wrap">
      <button class="menu-toggle">Primary Menu</button>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="content-area">
  <div class="post">
    <!-- Post Content -->
    <div class="container">
      <article>
        <!-- Title date & tags -->
        <div class="post-header">
          <h1 class="entry-title">
            关于勒索软件的了解与防御
            
          </h1>
          <p class="posted-on">
          2017-05-13
          </p>
          <div class="tags-links">
            
              
                <a href="/tags/笔记/" rel="tag">
                  笔记
                </a>
              
            
          </div>
        </div>
        <!-- Post Main Content -->
        <div class="entry-content">
          <p>下午查看群，有人求助，原因是电脑文件被加密，无访问权，起初并不是很在意。直到晚一些身边朋友开始转发注意勒索消息，意识到这次可能影响规模大了（后来据说是全国性的），于是开始着手寻求样本分析，下面是了解到的一些笔记：</p>
<p>0x01<br>科普：<br>2017年4月中旬，美国国家安全局（NSA）的黑客武器库在网上泄露公开，这次曝光的黑客武器可以远程攻破全球约70%的Windows设备，任何人都可以使用NSA的黑客武器攻击别人电脑。这简直就是人手一套核武器的节奏。<br>而在4月19深夜，国内安全厂商360也紧急宣布推出“NSA武器库免疫工具”；</p>
<p>0x02.<br>利用方程式eternalblue(永恒之蓝)攻击的445端口的smb服务（文件共享）、RDB（远程桌面）等感染，挖矿或远程等,该漏洞影响Windows 7和Windows Server 2008大部分版本系统，无需认证权限就能实现系统入侵控制（只要存在漏洞开机联网就会很大几率中招）；</p>
<p>该恶意勒索软件使用AES加密，想要破解基本难于上青天，因此还没中招的童鞋做好预防；</p>
<p>运营商对个人用户已经封掉此445端口，但是教育网却没有此限制，因为存在大量暴露445端口机器。（So这次大规模勒索攻击基本都校园网用户遭受）<br>建议尽快安装MS17-010补丁进行防御（<a href="https://technet.microsoft.com/zh-cn/library/security/MS17-010）；" target="_blank" rel="noopener">https://technet.microsoft.com/zh-cn/library/security/MS17-010）；</a><br>win10以下系统可以使用360NSA武器库免疫工具查询防备；</p>
<p>0x03.</p>
<p>######检测端口号<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat /? #命令</span><br></pre></td></tr></table></figure></p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -na #查询所有端口</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano -p tcp | find &quot;445&quot; &gt;nul 2&gt;nul &amp;&amp; echo 445端口已开启 || echo 445未开启</span><br></pre></td></tr></table></figure>
<p><img src="http://ww3.sinaimg.cn/large/006HJ39wgy1ffj4su49bxj30mv0hajsa.jpg" alt="445"></p>
<p>#####可以看到全球有大量的主机或服务器开放445端口(大约850万台):<br><img src="http://ww4.sinaimg.cn/large/006HJ39wgy1ffj4vcfu27j30wb0gjwg1.jpg" alt="445"></p>
<p>0x04.</p>
<p>######样本：20170512<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://pan.baidu.com/s/1pL5AEwV#list/path=%2F</span><br></pre></td></tr></table></figure></p>
<p>0x05.</p>
<p>######可能解决方法：没亲身实测，存在不确定性，需自鉴！</p>
<p>关闭本机端口：445(防火墙阻断端口通讯)。打上补丁，或者升级到最新系统打上最新漏洞补丁；</p>
<p>如何关闭139端口及445端口等危险端口<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://jingyan.baidu.com/article/d621e8da0abd192865913f1f.html</span><br></pre></td></tr></table></figure></p>
<p>360NSA免疫工具<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://dl.360safe.com/nsa/nsatool.exe</span><br></pre></td></tr></table></figure></p>
<p>TeslaCrypt勒索软件作者突然道歉并放出主解密密钥<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.cnbeta.com/articles/tech/503133.htm</span><br></pre></td></tr></table></figure></p>
<p>类似的解密软件都是通过key.dat文件，以恢复加密时使用的主密钥，来达到解密的目的；后面会搭建环境进行分析，分析结果会共享出一起交流；</p>
<p>建议平时养成备份习惯，以避免出现问题时把损失压到最小，特别是一些研究工作者。勒索者之所以选择比特币支付，是因为比特币不易被追踪到，而一个比特币=11904.3994软妹币！！！</p>
<p><img src="http://ww2.sinaimg.cn/large/006HJ39wgy1ffj63aoheij30nb0gxtcu.jpg" alt="445"></p>
<p>比特币走势：<br><img src="http://ww2.sinaimg.cn/large/006HJ39wgy1ffj63xyvc6j30iw0acdiy.jpg" alt="445"></p>
<p>还有，不管数据重要不重要，最好都不要向勒索者支付赎金，这样不仅助长勒索，最后也不一定能给你恢复全部的数据；</p>

        </div>
      </article>
    </div>
    <!-- Comments -->
    <div class="container">
      
<section id="comment">
  <!-- <h1 class="title">留言</h1> -->

  
</section>


    </div>
    <!-- Pre or Next -->
    <div class="nav-links">
      
        <div class="nav-previous">
          <a href="/2017/07/12/720dcim/" rel="prev"><span class="meta-arraw meta-arraw-left"></span> 上一页</a>
        </div>
      
      
        <div class="nav-next">
          <a href="/2017/04/18/cstc-2017/" rel="prev">下一页 <span class="meta-arraw meta-arraw-right"></span></a>
        </div>
      
    </div>

  </div>
</div>


  <!-- Footer -->
  <!-- Footer-widgets -->
<div class="footer-widgets">
  <div class="row inside-wrapper">
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">关于本站</h1>
        <div class="custom-widget-content">
          
          ‘SecRing | 关注网络安全,记录在IT圈子成长的故事.主要包括前端、java开发,信息安全,数据分析等,当然也有一些生活的乐趣...
        </div>
      </aside>
    </div>
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">与我联系</h1>
        <div class="widget-text">
          
            
              <a href="https://github.com/GallenHu" class="icon icon-github" target="_blank">github</a>
            
          
        </div>
      </aside>
    </div>
    <div class="col-1-3">
      <aside>
        <h1 class="widget-title">站内搜索</h1>
        <div class="widget-text">
          <form onSubmit="return appDaily.submitSearch('')">
            <p>
              <input type="text" placeholder="search..." id="homeSearchInput">
            </p>
            <!-- <input type="submit" value="GO"> -->
          </form>
        </div>
      </aside>
    </div>
  </div>
</div>
<!-- Footer -->
<footer class="site-info">
  <p>
    <span>'SecRing &copy; 2018</span>&nbsp;|
	<span id="busuanzi_container_site_uv">&nbsp;您是第<span id="busuanzi_value_site_uv"></span>个小伙伴(•̀ᴗ•́)و</span>
	<span id="busuanzi_container_site_pv">第<span id="busuanzi_value_site_pv"></span>个脚印!&nbsp;</span>
    <span><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></span>
  </p>
</footer>


  <!-- After footer scripts -->
  <!-- scripts -->
<script src="/js/app.js"></script>





</body>

</html>
